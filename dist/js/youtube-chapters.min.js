!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("YTC",[],t):"object"==typeof exports?exports.YTC=t():e.YTC=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.YouTubeChapters=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),o=r(4),u=function(e){return e&&e.__esModule?e:{default:e}}(o),l=[],s=[],d=[],h=void 0;t.YouTubeChapters=function(){function e(t,r){n(this,e),this.element=t,this.options=r;for(var i=0;i<l.length;i++)if(l[i]===this.element)throw new Error("An instance of YouTubeChapters with element "+this.element+" already exists.");if(!this.element||"string"!=typeof this.element)throw new Error("Element has not been set, please set an element.");if((0,u.default)(this.element).length<1)throw new Error("Element "+this.element+" does not exsit.");if(r=(0,a.defaultOption)(r,{}),(0,a.checkIds)(r.chapters))throw new Error("All ID's must be unqiue");this.ytc={},this.randomNumber=Math.floor(99999*Math.random()),this.ytc.element="youtube-iframe-"+this.randomNumber,this.ytc.player=null,this.ytc.options={youtubeId:(0,a.defaultOption)(r.youtubeId,"bHQqvYy5KYo"),fluid:(0,a.defaultOption)(r.fluid,!1),playerVars:(0,a.defaultOption)(r.playerVars,{}),height:(0,a.defaultOption)(r.height,"100%"),width:(0,a.defaultOption)(r.width,"100%"),showTime:(0,a.defaultOption)(r.showTime,!1),chapters:(0,a.sort)((0,a.defaultOption)(r.chapters,[]))},this._init()}return i(e,[{key:"_init",value:function(){l.push(this.element),this._buildStruture()._addChapterPoints()._addTextPoints()._addYouTubeVideo()}},{key:"_buildStruture",value:function(){var e=(0,u.default)(this.element);return e.addElement("div",{class:"loading"},"Loading setup....").addElement("div",{class:"youtube-chapter-wrapper"}),e.find(".youtube-chapter-wrapper").addElement("div",{class:"youtube-wrapper",style:"max-width: "+this.ytc.options.width}).addElement("div",{class:"chapters-wrapper"}).addElement("div",{class:"text-wrapper"}).find(".youtube-wrapper").addElement("div",{class:"youtube-video "+(this.ytc.options.fluid?"fluid-wrapper":""),id:"youtube-video-"+this.randomNumber}).find(".youtube-video").addElement("div",{class:"youtube-iframe",id:this.ytc.element}),e.find(".chapters-wrapper").addElement("ul",{id:"chapters-wrapper-"+this.randomNumber}),e.find(".text-wrapper").addElement("ul",{id:"text-wrapper-"+this.randomNumber}),this}},{key:"_addChapterPoints",value:function(){var e=this,t=function(t){t.preventDefault(),e.seekTo(t.currentTarget.getAttribute("data-time"))},r=(0,u.default)("#chapters-wrapper-"+this.randomNumber),n=!0,i=!1,o=void 0;try{for(var l,s=this.ytc.options.chapters[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var d=l.value;r.addElement("li",{class:"chapter-point-wrapper",id:"chapter-"+d.id+"-"+this.randomNumber,"data-time":(0,a.convertTime)(d.time)}).find("li.chapter-point-wrapper").addElement("div",{class:"chapter-point",id:"chapter-point-"+d.id+"-"+this.randomNumber},d.title).find(".chapter-point").addElement("span",{class:"time"},this.ytc.options.showTime?d.time:"")}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r.find("li.chapter-point-wrapper").addEvent("click",t),this}},{key:"_addTextPoints",value:function(){var e=(0,u.default)("#text-wrapper-"+this.randomNumber),t=!0,r=!1,n=void 0;try{for(var i,a=this.ytc.options.chapters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.addElement("li",{class:"text-point",id:"text-point-"+o.id+"-"+this.randomNumber},o.text)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return this}},{key:"_addYouTubeVideo",value:function(){var e=this;if(window.YT&&window.YT.Player)this.playerSetup(this.ytc);else{if(!window.onYouTubeIframeAPIReady){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),window.onYouTubePlayerAPIReady=function(){var e=!0,t=!1,r=void 0;try{for(var n,i=s[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){(0,n.value)()}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}}s.push(function(){e.playerSetup(e.ytc)})}return this}},{key:"complete",value:function(){var e=(0,u.default)(this.element),t=e.find("#youtube-video-"+this.randomNumber).height();e.find(".chapters-wrapper").height(t),e.find(".youtube-chapter-wrapper").addClass("complete"),e.find(".loading").remove()}},{key:"playerSetup",value:function(e){var t=this,r=function(e){var t=e.data;150!==t&&101!==t||window.alert("Error: An error has occurred"),e.target.stopVideo()},n=function(e){var r=(0,u.default)(t.element+" .chapter-point-wrapper"),n=function(){r.each(function(e,n){var i=(0,u.default)("#"+n.getAttribute("id").replace("chapter","text-point")),a=parseFloat(n.getAttribute("data-time")),o=void 0;o=r.element[e+1]?parseFloat(r.element[e+1].getAttribute("data-time")):t.ytc.player.getDuration(),n.classList.remove("current"),i.removeClass("current"),t.ytc.player.getCurrentTime()>a&&t.ytc.player.getCurrentTime()<o&&(n.classList.add("current"),i.isEmpty()||i.addClass("current"))})};switch(e.data){case YT.PlayerState.PLAYING:h=setInterval(n,250);break;case YT.PlayerState.UNSTARTED:case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:clearInterval(h);break;default:throw new Error("Something went wrong.")}};e.player=new YT.Player(e.element,{height:e.options.height,width:e.options.width,videoId:e.options.youtubeId,playerVars:e.options.playerVars,events:{onReady:function(){var e=!0,r=!1,n=void 0;try{for(var i,a=d[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){(0,i.value)()}}catch(e){r=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}d.length=0,t.complete()},onStateChange:n,onError:r}})}},{key:"seek",value:function(e){this.ytc.player.seekTo(e),this.ytc.player.playVideo()}},{key:"seekTo",value:function(e){var t=this;return e=parseFloat((0,a.convertTime)(e)),window.YT&&window.YT.Player&&0===d.length?this.seek(e):d.push(function(){t.seek(e)}),this}},{key:"goToChatperId",value:function(e){var t=this,r=(0,a.getTime)(this.ytc.options.chapters,e);if(!r)throw new Error("No id with "+e+" found.");var n=parseFloat(r);return window.YT&&window.YT.Player&&0===d.length?this.seek(n):d.push(function(){t.seek(n)}),this}},{key:"pause",value:function(){var e=this;return window.YT&&window.YT.Player&&0===d.length?this.ytc.player.pauseVideo():d.push(function(){e.ytc.player.pauseVideo()}),this}},{key:"play",value:function(){var e=this;return window.YT&&window.YT.Player&&0===d.length?this.ytc.player.playVideo():d.push(function(){e.ytc.player.playVideo()}),this}}],[{key:"setup",value:function(t,r){return new e(t,r)}}]),e}()},function(e,t){},function(e,t,r){"use strict";function n(e,t){return e&&void 0!==e?e:t}function i(e){if(!e)return!1;var t=e.map(function(e){return e.id});return t.some(function(e,r){return t.indexOf(e)!==r})}function a(e,t){if(!e)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(l.id===t)return u(l.time)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return null}function o(e){return/^\d+$/.test(e)}function u(e){if(o(e))return e;var t=e.replace(/ /g,"").match(/(\d+h)?(\d+m)?(\d+s)?/);return t[0]?3600*(parseInt(t[1],10)||0)+60*(parseInt(t[2],10)||0)+(parseInt(t[3],10)||0):(t=e.split(":"),t.length>2?3600*parseInt(t[0],10)+60*parseInt(t[1],10)+1*parseInt(t[2],10):60*parseInt(t[0],10)+1*parseInt(t[1],10))}function l(e){return e.sort(function(e,t){return u(e.time)-u(t.time)})}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOption=n,t.checkIds=i,t.getTime=a,t.convertTime=u,t.sort=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(1);var n=r(0);t.default=n.YouTubeChapters.setup,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){if(n(this,e),Array.isArray(t))this.element=t;else if(this.element=[],"string"==typeof t)for(var r=document.querySelectorAll(t),i=0;i<r.length;i++)this.element[i]=r[i];this.length=this.element.length}return i(e,[{key:"addElement",value:function(e,t,r){var n=document.createElement(e);if(t&&this.attr(t,n),r&&(n.innerHTML=r),this.element.length)for(var i=0;i<this.element.length;i++)this.element[i].appendChild(n);else this.element.appendChild(n);return this}},{key:"find",value:function(t){for(var r=[],n=0;n<this.length;n++){var i=this.element[n].querySelectorAll(t);if(i)for(var a=0;a<i.length;a++)r.push(i[a])}return new e(r)}},{key:"addEvent",value:function(e,t){for(var r=0;r<this.length;r++)this.element[r].addEventListener(e,t,!1);return this}},{key:"each",value:function(e){for(var t=0;t<this.length&&!1!==e.call(this.element[t],t,this.element[t]);t++);return this}},{key:"addClass",value:function(e){if(this.element.length>0)for(var t=0;t<this.element.length;t++)this.element[t].classList.add(e);return this}},{key:"removeClass",value:function(e){if(this.element.length>0)for(var t=0;t<this.element.length;t++)this.element[t].classList.remove(e);return this}},{key:"height",value:function(e){if(!e)return this.element[0].clientHeight;for(var t=0;t<this.element.length;t++)this.element[t].style.height=e+"px";return this}},{key:"attr",value:function(e,t){if("string"==typeof e)return this.element[0].getAttribute(e);for(var r in e)if(e.hasOwnProperty(r))if(t)t.setAttribute(r,e[r]);else for(var n=0;n<this.element.length;n++)this.element[n].setAttribute(r,e[r]);return this}},{key:"remove",value:function(){for(var e=0;e<this.element.length;e++)this.element[e].parentNode.removeChild(this.element[e])}},{key:"isEmpty",value:function(){return""===this.element[0].innerHTML.trim()}}],[{key:"findSelector",value:function(t){return new e(t)}}]),e}();t.default=a.findSelector,e.exports=t.default}])});